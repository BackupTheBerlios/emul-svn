<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>emul: /prog/cpp/emul-1.0.8/src/emul.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">emul-1.0.8</a>&nbsp;/&nbsp;<a class="el" href="dir_000001.html">src</a></div>
<h1>emul.h</h1><a href="emul_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/***************************************************************************</span>
00002 <span class="comment"> *   Copyright (C) 2005 by Lonnie Mendez                                   *</span>
00003 <span class="comment"> *   lmendez19@austin.rr.com                                               *</span>
00004 <span class="comment"> *                                                                         *</span>
00005 <span class="comment"> *   earthmateusb_userland: Portable user land library providing access to *</span>
00006 <span class="comment"> *                          earthmate usb device via libusb.               *</span>
00007 <span class="comment"> *                                                                         *</span>
00008 <span class="comment"> *   This program is free software; you can redistribute it and/or modify  *</span>
00009 <span class="comment"> *   it under the terms of the GNU General Public License as published by  *</span>
00010 <span class="comment"> *   the Free Software Foundation; either version 2 of the License, or     *</span>
00011 <span class="comment"> *   (at your option) any later version.                                   *</span>
00012 <span class="comment"> *                                                                         *</span>
00013 <span class="comment"> *   This program is distributed in the hope that it will be useful,       *</span>
00014 <span class="comment"> *   but WITHOUT ANY WARRANTY; without even the implied warranty of        *</span>
00015 <span class="comment"> *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         *</span>
00016 <span class="comment"> *   GNU General Public License for more details.                          *</span>
00017 <span class="comment"> *                                                                         *</span>
00018 <span class="comment"> *   You should have received a copy of the GNU General Public License     *</span>
00019 <span class="comment"> *   along with this program; if not, write to the                         *</span>
00020 <span class="comment"> *   Free Software Foundation, Inc.,                                       *</span>
00021 <span class="comment"> *   59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.             *</span>
00022 <span class="comment"> ***************************************************************************/</span>
00023  
00024 <span class="preprocessor">#ifndef EMUL_H</span>
00025 <span class="preprocessor"></span><span class="preprocessor">#define EMUL_H</span>
00026 <span class="preprocessor"></span>
00027 <span class="preprocessor">#ifdef __cplusplus</span>
00028 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">"C"</span> {
00029 <span class="preprocessor">#endif</span>
00030 <span class="preprocessor"></span>
00037 <span class="comment">/* TODO: add functions to read uart status data - pointless really, but oh well. */</span>
00038 <span class="preprocessor">#define UART_DSR         0x20 </span><span class="comment">/* data set ready - flow control - device to host */</span>
00039 <span class="preprocessor">#define UART_CTS         0x10 </span><span class="comment">/* clear to send - flow control - device to host */</span>
00040 <span class="preprocessor">#define UART_RI          0x10 </span><span class="comment">/* ring indicator - modem - device to host */</span> 
00041 <span class="preprocessor">#define UART_CD          0x40 </span><span class="comment">/* carrier detect - modem - device to host */</span>
00042 <span class="preprocessor">#define PARITY_ERROR     0x08 </span><span class="comment">/* received from input report - device to host */</span>
00043 
00044 
00045 <span class="comment">/* The header file is heavily doxygenated... please have a look at html/index.html if</span>
00046 <span class="comment"> * you find reading this header is starting to give you a headache.</span>
00047 <span class="comment"> */</span>
00048 
<a name="l00054"></a><a class="code" href="emul_8h.html#a5">00054</a> <span class="preprocessor">#define NORMAL  0x0</span>
00055 <span class="preprocessor"></span>
<a name="l00061"></a><a class="code" href="emul_8h.html#a6">00061</a> <span class="preprocessor">#define EMATE   0x1</span>
00062 <span class="preprocessor"></span>
00069 <span class="keywordtype">void</span> em_devtype(<span class="keywordtype">int</span> type);
00076 <span class="keywordtype">int</span>  em_isemate(<span class="keywordtype">void</span>);
00081 <span class="keywordtype">int</span>  em_isactive(<span class="keywordtype">void</span>);
00089 <span class="keywordtype">int</span>  em_open(<span class="keywordtype">void</span>);
00094 <span class="keywordtype">void</span> em_close(<span class="keywordtype">void</span>);
00102 <span class="keywordtype">int</span> em_replug(<span class="keywordtype">void</span>);
<a name="l00110"></a><a class="code" href="emul_8h.html#a7">00110</a> <span class="preprocessor">#define CONTROL_DTR      0x20 </span><span class="comment">/* data terminal ready - flow control - host to device */</span>
00111 
<a name="l00118"></a><a class="code" href="emul_8h.html#a8">00118</a> <span class="preprocessor">#define CONTROL_RTS      0x10 </span><span class="comment">/* request to send - flow control - host to device */</span>
00119 
<a name="l00125"></a><a class="code" href="emul_8h.html#a9">00125</a> <span class="preprocessor">#define CONTROL_RESET    0x08 </span><span class="comment">/* sent with output report (unknown affect) - host to device */</span>
00126 
<a name="l00131"></a><a class="code" href="emul_8h.html#a10">00131</a> <span class="preprocessor">#define CONTROL_DROP     0x00 </span><span class="comment">/* drop all lines */</span>
00132 
00137 <span class="keywordtype">void</span> em_linecontrol(u_int8_t lines);
<a name="l00142"></a><a class="code" href="emul_8h.html#a11">00142</a> <span class="preprocessor">#define PAR_ODD          0x30</span>
00143 <span class="preprocessor"></span>
<a name="l00147"></a><a class="code" href="emul_8h.html#a12">00147</a> <span class="preprocessor">#define PAR_EVEN         0x10</span>
00148 <span class="preprocessor"></span>
<a name="l00152"></a><a class="code" href="emul_8h.html#a13">00152</a> <span class="preprocessor">#define PAR_NONE         0x00</span>
00153 <span class="preprocessor"></span>
<a name="l00157"></a><a class="code" href="structserconfig.html">00157</a> <span class="keyword">struct </span><a class="code" href="structserconfig.html">serconfig</a> {
<a name="l00162"></a><a class="code" href="structserconfig.html#o0">00162</a>         <span class="keywordtype">long</span>  <a class="code" href="structserconfig.html#o0">baudrate</a>;
<a name="l00167"></a><a class="code" href="structserconfig.html#o1">00167</a>         <span class="keywordtype">short</span> <a class="code" href="structserconfig.html#o1">databits</a>;
<a name="l00172"></a><a class="code" href="structserconfig.html#o2">00172</a>         <span class="keywordtype">short</span> <a class="code" href="structserconfig.html#o2">stopbits</a>; <span class="comment">/* 1, 2 stop bits */</span>
<a name="l00177"></a><a class="code" href="structserconfig.html#o3">00177</a>         <span class="keywordtype">short</span> <a class="code" href="structserconfig.html#o3">parity</a>;   <span class="comment">/* 0 - none, 1 - odd, 2 - even parity */</span>
00178 };
00184 <span class="keywordtype">int</span>  em_serconfig_set(<span class="keyword">struct</span> <a class="code" href="structserconfig.html">serconfig</a> *sconfig);
00189 <span class="keywordtype">int</span>  em_serconfig_get(<span class="keyword">struct</span> <a class="code" href="structserconfig.html">serconfig</a> *sconfig);
00190 
<a name="l00195"></a><a class="code" href="emul_8h.html#a14">00195</a> <span class="preprocessor">#define EM_MAX_READ       4096</span>
00196 <span class="preprocessor"></span>
<a name="l00200"></a><a class="code" href="emul_8h.html#a15">00200</a> <span class="preprocessor">#define EM_MAX_WRITE      4096</span>
00201 <span class="preprocessor"></span>
00207 <span class="keywordtype">int</span>  em_read(u_int8_t buffer[], <span class="keywordtype">int</span> count);
00214 <span class="keywordtype">int</span>  em_write(<span class="keyword">const</span> u_int8_t *buffer, <span class="keywordtype">int</span> count);
00215 
00220 <span class="keywordtype">int</span> em_flush(<span class="keywordtype">int</span> queue_selector);
00221 
00226 <span class="keywordtype">int</span>  em_read_data_avail(<span class="keywordtype">void</span>);
00231 <span class="keywordtype">int</span>  em_write_data_avail(<span class="keywordtype">void</span>);
00232 
00241 <span class="keywordtype">int</span>  em_datawait(<span class="keyword">struct</span> timeval *tv, <span class="keywordtype">int</span> jumpout);
00242 
00253 <span class="comment">/* counterpart to select</span>
00254 <span class="comment"> */</span> 
00255 <span class="keywordtype">int</span> em_select(<span class="keywordtype">int</span> n, fd_set *readfds, fd_set *writefds, fd_set *exceptfds, <span class="keyword">struct</span> timeval *timeout);
00256 
00259 <span class="keywordtype">void</span> em_writewait(<span class="keywordtype">void</span>);
00260 
00265 <span class="keywordtype">void</span> em_debuglevel(<span class="keywordtype">int</span> mode);
00266 
<a name="l00272"></a><a class="code" href="emul_8h.html#a16">00272</a> <span class="preprocessor">#define EMT_ACTIVE 1</span>
00273 <span class="preprocessor"></span>
<a name="l00278"></a><a class="code" href="emul_8h.html#a17">00278</a> <span class="preprocessor">#define EMT_IDLING 0</span>
00279 <span class="preprocessor"></span>
00284 <span class="keywordtype">void</span> em_change_state(<span class="keywordtype">int</span> state);
00285 
00296 ssize_t READ(<span class="keywordtype">int</span> fd, <span class="keywordtype">void</span> *buf, size_t count);
00306 ssize_t WRITE(<span class="keywordtype">int</span> fd, <span class="keyword">const</span> <span class="keywordtype">void</span> *buf, size_t count);
00307 
00312 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> em_getbaudmask(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> rate);
00317 <span class="keywordtype">long</span> em_getbaudrate(<span class="keywordtype">void</span>);
00318 
00319 <span class="comment">/* usb devid/vendid */</span>
<a name="l00322"></a><a class="code" href="emul_8h.html#a18">00322</a> <span class="preprocessor">#define  VENDOR_ID_DELORME        0x1163</span>
00323 <span class="preprocessor"></span>
<a name="l00325"></a><a class="code" href="emul_8h.html#a19">00325</a> <span class="preprocessor">#define  PRODUCT_ID_EARTHMATEUSB  0x0100</span>
00326 <span class="preprocessor"></span>
<a name="l00328"></a><a class="code" href="emul_8h.html#a20">00328</a> <span class="preprocessor">#define  PRODUCT_ID_EARTHMATELT20 0x0200</span>
00329 <span class="preprocessor"></span>
00330 
<a name="l00338"></a><a class="code" href="emul_8h.html#a21">00338</a> <span class="preprocessor">#define MAX_READ_WRITE 30</span>
00339 <span class="preprocessor"></span>
00345 <span class="keywordtype">int</span>  em_raw_read(u_int8_t buffer[]);
00351 <span class="keywordtype">int</span>  em_raw_write(u_int8_t *buffer, <span class="keywordtype">int</span> size);
00352 
00353 <span class="preprocessor">#ifdef __cplusplus</span>
00354 <span class="preprocessor"></span>}
00355 <span class="preprocessor">#endif</span>
00356 <span class="preprocessor"></span>
00357 <span class="preprocessor">#endif </span><span class="comment">/* ifndef EMUL_H */</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Mon Jul 4 07:37:41 2005 for emul by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>

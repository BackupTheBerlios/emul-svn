<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>EarthMate Userland Library: /prog/cpp/earthmateusb_userland/src/emul.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a></div>
<h1>/prog/cpp/earthmateusb_userland/src/emul.h</h1><a href="emul_8h.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">/***************************************************************************</span>
00002 <span class="comment"> *   Copyright (C) 2005 by Lonnie Mendez                                   *</span>
00003 <span class="comment"> *   lmendez19@austin.rr.com                                               *</span>
00004 <span class="comment"> *                                                                         *</span>
00005 <span class="comment"> *   earthmateusb_userland: Portable user land library providing access to *</span>
00006 <span class="comment"> *                          earthmate usb device via libusb.               *</span>
00007 <span class="comment"> *                                                                         *</span>
00008 <span class="comment"> *   This program is free software; you can redistribute it and/or modify  *</span>
00009 <span class="comment"> *   it under the terms of the GNU General Public License as published by  *</span>
00010 <span class="comment"> *   the Free Software Foundation; either version 2 of the License, or     *</span>
00011 <span class="comment"> *   (at your option) any later version.                                   *</span>
00012 <span class="comment"> *                                                                         *</span>
00013 <span class="comment"> *   This program is distributed in the hope that it will be useful,       *</span>
00014 <span class="comment"> *   but WITHOUT ANY WARRANTY; without even the implied warranty of        *</span>
00015 <span class="comment"> *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         *</span>
00016 <span class="comment"> *   GNU General Public License for more details.                          *</span>
00017 <span class="comment"> *                                                                         *</span>
00018 <span class="comment"> *   You should have received a copy of the GNU General Public License     *</span>
00019 <span class="comment"> *   along with this program; if not, write to the                         *</span>
00020 <span class="comment"> *   Free Software Foundation, Inc.,                                       *</span>
00021 <span class="comment"> *   59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.             *</span>
00022 <span class="comment"> ***************************************************************************/</span>
00023  
00024 <span class="preprocessor">#ifndef EMUL_H</span>
00025 <span class="preprocessor"></span><span class="preprocessor">#define EMUL_H</span>
00026 <span class="preprocessor"></span>
00033 <span class="comment">/* TODO: add functions to read uart status data - pointless really, but oh well. */</span>
00034 <span class="preprocessor">#define UART_DSR         0x20 </span><span class="comment">/* data set ready - flow control - device to host */</span>
00035 <span class="preprocessor">#define UART_CTS         0x10 </span><span class="comment">/* clear to send - flow control - device to host */</span>
00036 <span class="preprocessor">#define UART_RI          0x10 </span><span class="comment">/* ring indicator - modem - device to host */</span> 
00037 <span class="preprocessor">#define UART_CD          0x40 </span><span class="comment">/* carrier detect - modem - device to host */</span>
00038 <span class="preprocessor">#define PARITY_ERROR     0x08 </span><span class="comment">/* received from input report - device to host */</span>
00039 
00040 
00041 <span class="comment">/* The header file is heavily doxygenated... please have a look at html/index.html if</span>
00042 <span class="comment"> * you find reading this header is starting to give you a headache.</span>
00043 <span class="comment"> */</span>
00044 
<a name="l00050"></a><a class="code" href="emul_8h.html#a5">00050</a> <span class="preprocessor">#define NORMAL  0x0</span>
00051 <span class="preprocessor"></span>
<a name="l00057"></a><a class="code" href="emul_8h.html#a6">00057</a> <span class="preprocessor">#define EMATE   0x1</span>
00058 <span class="preprocessor"></span>
00063 <span class="keywordtype">void</span> em_devtype(<span class="keywordtype">int</span> type);
00068 <span class="keywordtype">int</span>  em_isemate(<span class="keywordtype">void</span>);
00073 <span class="keywordtype">int</span>  em_isactive(<span class="keywordtype">void</span>);
00081 <span class="keywordtype">int</span>  em_open(<span class="keywordtype">void</span>);
00086 <span class="keywordtype">void</span> em_close(<span class="keywordtype">void</span>);
<a name="l00094"></a><a class="code" href="emul_8h.html#a7">00094</a> <span class="preprocessor">#define CONTROL_DTR      0x20 </span><span class="comment">/* data terminal ready - flow control - host to device */</span>
00095 
<a name="l00102"></a><a class="code" href="emul_8h.html#a8">00102</a> <span class="preprocessor">#define CONTROL_RTS      0x10 </span><span class="comment">/* request to send - flow control - host to device */</span>
00103 
<a name="l00109"></a><a class="code" href="emul_8h.html#a9">00109</a> <span class="preprocessor">#define CONTROL_RESET    0x08 </span><span class="comment">/* sent with output report (unknown affect) - host to device */</span>
00110 
<a name="l00115"></a><a class="code" href="emul_8h.html#a10">00115</a> <span class="preprocessor">#define CONTROL_DROP     0x00 </span><span class="comment">/* drop all lines */</span>
00116 
00121 <span class="keywordtype">void</span> em_linecontrol(u_int8_t lines);
<a name="l00126"></a><a class="code" href="emul_8h.html#a11">00126</a> <span class="preprocessor">#define PAR_ODD          0x30</span>
00127 <span class="preprocessor"></span>
<a name="l00131"></a><a class="code" href="emul_8h.html#a12">00131</a> <span class="preprocessor">#define PAR_EVEN         0x10</span>
00132 <span class="preprocessor"></span>
<a name="l00136"></a><a class="code" href="emul_8h.html#a13">00136</a> <span class="preprocessor">#define PAR_NONE         0x00</span>
00137 <span class="preprocessor"></span>
<a name="l00141"></a><a class="code" href="structserconfig.html">00141</a> <span class="keyword">struct </span><a class="code" href="structserconfig.html">serconfig</a> {
<a name="l00146"></a><a class="code" href="structserconfig.html#o0">00146</a>         <span class="keywordtype">long</span>  <a class="code" href="structserconfig.html#o0">baudrate</a>;
<a name="l00151"></a><a class="code" href="structserconfig.html#o1">00151</a>         <span class="keywordtype">short</span> <a class="code" href="structserconfig.html#o1">databits</a>;
<a name="l00156"></a><a class="code" href="structserconfig.html#o2">00156</a>         <span class="keywordtype">short</span> <a class="code" href="structserconfig.html#o2">stopbits</a>; <span class="comment">/* 1, 2 stop bits */</span>
<a name="l00161"></a><a class="code" href="structserconfig.html#o3">00161</a>         <span class="keywordtype">short</span> <a class="code" href="structserconfig.html#o3">parity</a>;   <span class="comment">/* 0 - none, 1 - odd, 2 - even parity */</span>
00162 };
00168 <span class="keywordtype">int</span>  em_serconfig_set(<span class="keyword">struct</span> <a class="code" href="structserconfig.html">serconfig</a> *sconfig);
00173 <span class="keywordtype">int</span>  em_serconfig_get(<span class="keyword">struct</span> <a class="code" href="structserconfig.html">serconfig</a> *sconfig);
00174 
<a name="l00179"></a><a class="code" href="emul_8h.html#a14">00179</a> <span class="preprocessor">#define EM_MAX_READ       4096</span>
00180 <span class="preprocessor"></span>
<a name="l00184"></a><a class="code" href="emul_8h.html#a15">00184</a> <span class="preprocessor">#define EM_MAX_WRITE      4096</span>
00185 <span class="preprocessor"></span>
00191 <span class="keywordtype">int</span>  em_read(u_int8_t buffer[], <span class="keywordtype">int</span> count);
00198 <span class="keywordtype">int</span>  em_write(<span class="keyword">const</span> u_int8_t *buffer, <span class="keywordtype">int</span> count);
00199 
00204 <span class="keywordtype">int</span> em_flush(<span class="keywordtype">int</span> queue_selector);
00205 
00210 <span class="keywordtype">int</span>  em_read_data_avail(<span class="keywordtype">void</span>);
00215 <span class="keywordtype">int</span>  em_write_data_avail(<span class="keywordtype">void</span>);
00216 
00225 <span class="keywordtype">int</span>  em_datawait(<span class="keyword">struct</span> timeval *tv, <span class="keywordtype">int</span> jumpout);
00226 
00237 <span class="comment">/* counterpart to select</span>
00238 <span class="comment"> */</span> 
00239 <span class="keywordtype">int</span> em_select(<span class="keywordtype">int</span> n, fd_set *readfds, fd_set *writefds, fd_set *exceptfds, <span class="keyword">struct</span> timeval *timeout);
00240 
00243 <span class="keywordtype">void</span> em_writewait(<span class="keywordtype">void</span>);
00244 
00249 <span class="keywordtype">void</span> em_debuglevel(<span class="keywordtype">int</span> mode);
00250 
<a name="l00256"></a><a class="code" href="emul_8h.html#a16">00256</a> <span class="preprocessor">#define EMT_ACTIVE 1</span>
00257 <span class="preprocessor"></span>
<a name="l00262"></a><a class="code" href="emul_8h.html#a17">00262</a> <span class="preprocessor">#define EMT_IDLING 0</span>
00263 <span class="preprocessor"></span><span class="keywordtype">void</span> em_change_state(<span class="keywordtype">int</span> state);
00264 
00272 ssize_t READ(<span class="keywordtype">int</span> fd, <span class="keywordtype">void</span> *buf, size_t count);
00279 ssize_t WRITE(<span class="keywordtype">int</span> fd, <span class="keyword">const</span> <span class="keywordtype">void</span> *buf, size_t count);
00280 
00285 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> em_getbaudmask(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> rate);
00290 <span class="keywordtype">long</span> em_getbaudrate(<span class="keywordtype">void</span>);
00291 
00292 <span class="comment">/* usb devid/vendid */</span>
<a name="l00295"></a><a class="code" href="emul_8h.html#a18">00295</a> <span class="preprocessor">#define  VENDOR_ID_DELORME         0x1163</span>
00296 <span class="preprocessor"></span>
<a name="l00298"></a><a class="code" href="emul_8h.html#a19">00298</a> <span class="preprocessor">#define  PRODUCT_ID_EARTHMATEUSB   0x0100</span>
00299 <span class="preprocessor"></span>
00300 
<a name="l00308"></a><a class="code" href="emul_8h.html#a20">00308</a> <span class="preprocessor">#define MAX_READ_WRITE 30</span>
00309 <span class="preprocessor"></span>
00310 <span class="comment">/* TODO: consider removing the below two functions from public api view */</span>
00316 <span class="keywordtype">int</span>  em_raw_read(u_int8_t buffer[]);
00322 <span class="keywordtype">int</span>  em_raw_write(u_int8_t *buffer, <span class="keywordtype">int</span> size);
00323 
00324 <span class="preprocessor">#endif </span><span class="comment">/* ifndef EMUL_H */</span>
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Tue Mar 22 17:39:28 2005 for EarthMate Userland Library by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>

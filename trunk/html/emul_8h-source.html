<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>EarthMate Userland Library: src/emul.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a></div>
<h1>src/emul.h</h1><a href="emul_8h.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">/***************************************************************************</span>
00002 <span class="comment"> *   Copyright (C) 2005 by Lonnie Mendez                                   *</span>
00003 <span class="comment"> *   lmendez19@austin.rr.com                                               *</span>
00004 <span class="comment"> *                                                                         *</span>
00005 <span class="comment"> *   earthmateusb_userland: Portable user land library providing access to *</span>
00006 <span class="comment"> *                          earthmate usb device via libusb.               *</span>
00007 <span class="comment"> *                                                                         *</span>
00008 <span class="comment"> *   This program is free software; you can redistribute it and/or modify  *</span>
00009 <span class="comment"> *   it under the terms of the GNU General Public License as published by  *</span>
00010 <span class="comment"> *   the Free Software Foundation; either version 2 of the License, or     *</span>
00011 <span class="comment"> *   (at your option) any later version.                                   *</span>
00012 <span class="comment"> *                                                                         *</span>
00013 <span class="comment"> *   This program is distributed in the hope that it will be useful,       *</span>
00014 <span class="comment"> *   but WITHOUT ANY WARRANTY; without even the implied warranty of        *</span>
00015 <span class="comment"> *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         *</span>
00016 <span class="comment"> *   GNU General Public License for more details.                          *</span>
00017 <span class="comment"> *                                                                         *</span>
00018 <span class="comment"> *   You should have received a copy of the GNU General Public License     *</span>
00019 <span class="comment"> *   along with this program; if not, write to the                         *</span>
00020 <span class="comment"> *   Free Software Foundation, Inc.,                                       *</span>
00021 <span class="comment"> *   59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.             *</span>
00022 <span class="comment"> ***************************************************************************/</span>
00023  
00024 <span class="preprocessor">#ifndef EMUL_H</span>
00025 <span class="preprocessor"></span><span class="preprocessor">#define EMUL_H</span>
00026 <span class="preprocessor"></span>
00033 <span class="comment">/* TODO: add functions to read uart status data - pointless really, but oh well. */</span>
00034 <span class="preprocessor">#define UART_DSR         0x20 </span><span class="comment">/* data set ready - flow control - device to host */</span>
00035 <span class="preprocessor">#define UART_CTS         0x10 </span><span class="comment">/* clear to send - flow control - device to host */</span>
00036 <span class="preprocessor">#define UART_RI          0x10 </span><span class="comment">/* ring indicator - modem - device to host */</span> 
00037 <span class="preprocessor">#define UART_CD          0x40 </span><span class="comment">/* carrier detect - modem - device to host */</span>
00038 <span class="preprocessor">#define PARITY_ERROR     0x08 </span><span class="comment">/* received from input report - device to host */</span>
00039 
00040 
00041 <span class="comment">/* The header file is heavily doxygenated... please have a look at html/index.html if</span>
00042 <span class="comment"> * you find reading this header is starting to give you a headache.</span>
00043 <span class="comment"> */</span>
00044 
<a name="l00050"></a><a class="code" href="emul_8h.html#a5">00050</a> <span class="preprocessor">#define NORMAL  0x0</span>
00051 <span class="preprocessor"></span>
<a name="l00057"></a><a class="code" href="emul_8h.html#a6">00057</a> <span class="preprocessor">#define EMATE   0x1</span>
00058 <span class="preprocessor"></span>
00063 <span class="keywordtype">void</span> em_devtype(<span class="keywordtype">int</span> type);
00068 <span class="keywordtype">int</span>  em_isemate(<span class="keywordtype">void</span>);
00073 <span class="keywordtype">int</span>  em_isactive(<span class="keywordtype">void</span>);
00081 <span class="keywordtype">int</span>  em_open(<span class="keywordtype">void</span>);
00086 <span class="keywordtype">void</span> em_close(<span class="keywordtype">void</span>);
00094 <span class="keywordtype">int</span> em_replug(<span class="keywordtype">void</span>);
<a name="l00102"></a><a class="code" href="emul_8h.html#a7">00102</a> <span class="preprocessor">#define CONTROL_DTR      0x20 </span><span class="comment">/* data terminal ready - flow control - host to device */</span>
00103 
<a name="l00110"></a><a class="code" href="emul_8h.html#a8">00110</a> <span class="preprocessor">#define CONTROL_RTS      0x10 </span><span class="comment">/* request to send - flow control - host to device */</span>
00111 
<a name="l00117"></a><a class="code" href="emul_8h.html#a9">00117</a> <span class="preprocessor">#define CONTROL_RESET    0x08 </span><span class="comment">/* sent with output report (unknown affect) - host to device */</span>
00118 
<a name="l00123"></a><a class="code" href="emul_8h.html#a10">00123</a> <span class="preprocessor">#define CONTROL_DROP     0x00 </span><span class="comment">/* drop all lines */</span>
00124 
00129 <span class="keywordtype">void</span> em_linecontrol(u_int8_t lines);
<a name="l00134"></a><a class="code" href="emul_8h.html#a11">00134</a> <span class="preprocessor">#define PAR_ODD          0x30</span>
00135 <span class="preprocessor"></span>
<a name="l00139"></a><a class="code" href="emul_8h.html#a12">00139</a> <span class="preprocessor">#define PAR_EVEN         0x10</span>
00140 <span class="preprocessor"></span>
<a name="l00144"></a><a class="code" href="emul_8h.html#a13">00144</a> <span class="preprocessor">#define PAR_NONE         0x00</span>
00145 <span class="preprocessor"></span>
<a name="l00149"></a><a class="code" href="structserconfig.html">00149</a> <span class="keyword">struct </span><a class="code" href="structserconfig.html">serconfig</a> {
<a name="l00154"></a><a class="code" href="structserconfig.html#o0">00154</a>         <span class="keywordtype">long</span>  <a class="code" href="structserconfig.html#o0">baudrate</a>;
<a name="l00159"></a><a class="code" href="structserconfig.html#o1">00159</a>         <span class="keywordtype">short</span> <a class="code" href="structserconfig.html#o1">databits</a>;
<a name="l00164"></a><a class="code" href="structserconfig.html#o2">00164</a>         <span class="keywordtype">short</span> <a class="code" href="structserconfig.html#o2">stopbits</a>; <span class="comment">/* 1, 2 stop bits */</span>
<a name="l00169"></a><a class="code" href="structserconfig.html#o3">00169</a>         <span class="keywordtype">short</span> <a class="code" href="structserconfig.html#o3">parity</a>;   <span class="comment">/* 0 - none, 1 - odd, 2 - even parity */</span>
00170 };
00176 <span class="keywordtype">int</span>  em_serconfig_set(<span class="keyword">struct</span> <a class="code" href="structserconfig.html">serconfig</a> *sconfig);
00181 <span class="keywordtype">int</span>  em_serconfig_get(<span class="keyword">struct</span> <a class="code" href="structserconfig.html">serconfig</a> *sconfig);
00182 
<a name="l00187"></a><a class="code" href="emul_8h.html#a14">00187</a> <span class="preprocessor">#define EM_MAX_READ       4096</span>
00188 <span class="preprocessor"></span>
<a name="l00192"></a><a class="code" href="emul_8h.html#a15">00192</a> <span class="preprocessor">#define EM_MAX_WRITE      4096</span>
00193 <span class="preprocessor"></span>
00199 <span class="keywordtype">int</span>  em_read(u_int8_t buffer[], <span class="keywordtype">int</span> count);
00206 <span class="keywordtype">int</span>  em_write(<span class="keyword">const</span> u_int8_t *buffer, <span class="keywordtype">int</span> count);
00207 
00212 <span class="keywordtype">int</span> em_flush(<span class="keywordtype">int</span> queue_selector);
00213 
00218 <span class="keywordtype">int</span>  em_read_data_avail(<span class="keywordtype">void</span>);
00223 <span class="keywordtype">int</span>  em_write_data_avail(<span class="keywordtype">void</span>);
00224 
00233 <span class="keywordtype">int</span>  em_datawait(<span class="keyword">struct</span> timeval *tv, <span class="keywordtype">int</span> jumpout);
00234 
00245 <span class="comment">/* counterpart to select</span>
00246 <span class="comment"> */</span> 
00247 <span class="keywordtype">int</span> em_select(<span class="keywordtype">int</span> n, fd_set *readfds, fd_set *writefds, fd_set *exceptfds, <span class="keyword">struct</span> timeval *timeout);
00248 
00251 <span class="keywordtype">void</span> em_writewait(<span class="keywordtype">void</span>);
00252 
00257 <span class="keywordtype">void</span> em_debuglevel(<span class="keywordtype">int</span> mode);
00258 
<a name="l00264"></a><a class="code" href="emul_8h.html#a16">00264</a> <span class="preprocessor">#define EMT_ACTIVE 1</span>
00265 <span class="preprocessor"></span>
<a name="l00270"></a><a class="code" href="emul_8h.html#a17">00270</a> <span class="preprocessor">#define EMT_IDLING 0</span>
00271 <span class="preprocessor"></span><span class="keywordtype">void</span> em_change_state(<span class="keywordtype">int</span> state);
00272 
00280 ssize_t READ(<span class="keywordtype">int</span> fd, <span class="keywordtype">void</span> *buf, size_t count);
00287 ssize_t WRITE(<span class="keywordtype">int</span> fd, <span class="keyword">const</span> <span class="keywordtype">void</span> *buf, size_t count);
00288 
00293 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> em_getbaudmask(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> rate);
00298 <span class="keywordtype">long</span> em_getbaudrate(<span class="keywordtype">void</span>);
00299 
00300 <span class="comment">/* usb devid/vendid */</span>
<a name="l00303"></a><a class="code" href="emul_8h.html#a18">00303</a> <span class="preprocessor">#define  VENDOR_ID_DELORME         0x1163</span>
00304 <span class="preprocessor"></span>
<a name="l00306"></a><a class="code" href="emul_8h.html#a19">00306</a> <span class="preprocessor">#define  PRODUCT_ID_EARTHMATEUSB   0x0100</span>
00307 <span class="preprocessor"></span>
00308 
<a name="l00316"></a><a class="code" href="emul_8h.html#a20">00316</a> <span class="preprocessor">#define MAX_READ_WRITE 30</span>
00317 <span class="preprocessor"></span>
00318 <span class="comment">/* TODO: consider removing the below two functions from public api view */</span>
00324 <span class="keywordtype">int</span>  em_raw_read(u_int8_t buffer[]);
00330 <span class="keywordtype">int</span>  em_raw_write(u_int8_t *buffer, <span class="keywordtype">int</span> size);
00331 
00332 <span class="preprocessor">#endif </span><span class="comment">/* ifndef EMUL_H */</span>
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Sat Apr 2 14:58:13 2005 for EarthMate Userland Library by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>
